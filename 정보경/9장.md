#### 2부: 실전 이미지 학습: 폐암 조기 진단

#### 9장. 암과 싸워 이기기 위한 파이토치 활용

:heavy_check_mark: 사용 데이터, 개념 정리
\
\
<CT 스캔 데이터>

- 단일 채널 3차원 배열로 표현되는 3차원 엑스레이 데이터. 
복셀(Voxel): 3차원 공간의 기본 단위. 2차원의 픽셀 개념. CT 데이터의 경우 직육면체이다.
복셀의 명도: 해당 위치 물체의 평균 질량 밀도 (밀도가 높으면 명도가 높음)
즉, CT 스캔 데이터는 밀도 정보를 가진 3차원 배열 데이터이다. 
- LUNA 그랜드 챌린지에서 제공한 CT 데이터를 사용할 것이다. 

\
\
<결절>

폐 내부에 나타나는 무수한 돌기나 덩어리. 밀도가 낮은 폐 조직에 매달리거나 폐 벽에 붙어있다. 양성이거나 악성이다. 크기는 3cm 이하. (본 프로젝트는 크기를 고려하지 않음)
암은 무조건 결절이므로, 진단 범위를 줄일 수 있음 -> 범위 축소로 분류기의 학습에 도움.


#

:heavy_check_mark: End to End 폐암 진단기

<프로세스>
1) Data loading
  -CT인스턴스 제작해 3차원 스캔 데이터 저장
  데이터를 파이토치에서 사용 가능한 형태로 불러오기.
2) Segmentation
  -CT 데이터와 Segmentation 모듈 결합 
  폐의 잠재적 결절에 해당하는 복셀 찾아내어 히트맵 작성 (이를 통해 기타 부위 무시, 관찰 대상에 집중하는 것에 도움)
3) Grouping
  -관심 있는 복셀을 그룹화
  관심 있는 복셀을 덩어리(=후보 결절)로 그룹화, 중심부 찾음.
  각 결절에 인덱스가 부여되며 중심부 행, 열로 위치 파악 가능. 
  딥러닝을 크게 요구하지 않음. 딥러닝 단계의 연결
4) Classification
  -분류 모델과 후보 샘플의 결합으로 결절 분류 진행.
  3차원 컨볼루션을 사용해 결절 여부 구분. 목표는 종양 진단이므로 결절인 정보만 사용하여 작업 단위를 줄인다.
5) Diagnose
  -분류 모델과 후보 샘플의 결합으로 종양의 양성/악성 구분. 
  각 결절별 악성 예측(최댓값 사용) 하나라도 악성이 예측되었을 시 암 소견을 보인다고 진단.



<프로세스를 다음과 같이 구성한 이유> 
- 자동화하기 어려움. 
제공되는 기존 모델- 종류가 제한되지 않은 수십만 건의 이미지로 훈련됨
현재 프로젝트 - 데이터가 종류 제한(CT 사진), 수량 제한

따라서 기존의 고급 모델을 사용하는 대신 End to End 방식에서 데이터를 잘 통합할 수 있는 검증된 모델을 설계할 것



<프로세스 특징>
- 2, 3단계/ 4단계 별개 진행 가능.
  2단계: 복셀 선별 - 정답이 존재하는 데이터가 아님
  3단계/4단계: 복셀 그룹화 / 결절 여부 분류 - 정답이 존재하는 데이터 사용
- 사용되는 모델이 상호작용 하지 않으므로,(2 / 3,4) 역전파 사용 X, 각 단계 내에서 최적화가 이루어지는 방식으로 동작
  솔루션 효율이 최대화되지는 않으나, 학습하기 나음.
  각 단계 내에 집중 가능. 




